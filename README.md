# Patratskiy Maxim's branch

### Воспоминания от 10.09

##### Сначала про работу карты. 

У нас будет класс WorldMap, который будет хранить трехмерный массив указателей на Units. Трехмерный массив будет разбит на условные блоки. Мы имеем двухмерный массив в каждом элементе которого хранятся массивы указателей. Каждый элемент двумерного массива будем называть чанком, где один чанк будет отвечать за объекты персонажей находящихся в нём. <p>

Обрабатывать объекты движком мы будем те, что лежат в подмассиве размером 5 на 5 чанков. Отрисовывать только один чанк. Также брать объекты на проверку нажатия на них из чанка в котором будет находится главный герой. <p>

Остаётся открытым вопрос о том, как мы будем переносить персонажей из чанка в чанк. Проблема заключается в назначении ответственного за это класс. Была идея сделать LocationController <p>

<p>

##### Теперь про Handler и взаимодействия

Первоначально надо написать класс адаптер для евентов библиотеки SFML. Мы будем использовать евенты нажатия клавиш клавиатуры и мыши sfml, а потом преобразовывать в наши events. <p>

Сейчас мы имеем какое-то представление о том, как будут появляться и обрабатываться эвенты. В главном игровом цикле у всех объектов Units вызывается метод pushEvent(), который по ссылке записывает в контейнер евентов (eventsPriorityQueue) класса Handler. Далее идет обработка этих событий самим обработчиком. В зависимости от того, от кого пришла то или иное событие (событие будет структурой, которая будет хранить такие данные как: от кого пришло событие, его тип, какая-то доп инфа в зависимости от типа). После того, как обработчик обработал событие, он отправляет какие-то данные или "дергает" по указателю за нужные "ниточки" у PlayerController, NPCController, EnvironmentControler, а те в свою очередь дергают за подконтрольные им объекты. Подробнее описано графически взаимодействие (оно в будующем будет перенесено графически на компьтер) в моём блокноте. Фотография данной страницы фото есть в нашей конфе

##### Про доп данные

Мы уже начали думать над тем, что будет лежать в библиотеке math. Там будут написаны типы данных такие как: vector3d, vector2d, hashTable, какое-нибудь дерево. Также реализованы различные алгоритмы поиска, сортировки и тд. <p>

Последующим нашим шагом будет написание файла с таблицами, описывающие свойства различный вещей нашей природы. Таблица с заклинаниями, где должно быть написано сколько маны стоит заклинание и скок урона нанеесет, описание похоже у брони, оружия, баффов и дебаффов (накидываемых, временных и постояных эффектов)